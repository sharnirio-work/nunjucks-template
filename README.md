## Access
* Repo project just html: https://repo.builtwith.care/repo/reliable/nunjucks-template
* Repo project with wp: https://repo.builtwith.care/repo/reliable/WP-theme-HTML-Gulp-template
* Repo for Bootstrap 4: https://repo.builtwith.care/repo/reliable/gulp-template-bootstrap-4
* Repo for  Bootstrap 5: https://repo.builtwith.care/repo/reliable/gulp-template-bootstrap-5
* Repo for  tailwindcss 2  https://repo.builtwith.care/repo/reliable/gulp-template-tailwindc
* Repo for  tailwindcss 3 https://repo.builtwith.care/repo/reliable/gulp-template-tailwindcss-3

#------------------------------------------------------------------------------------------------------
# FAQ для шаблона под html (https://repo.builtwith.care/repo/reliable/nunjucks-template):
(Будет добавлено в скором времени)


#------------------------------------------------------------------------------------------------------
# FAQ для шаблона под wp (https://repo.builtwith.care/repo/reliable/WP-theme-HTML-Gulp-template):

* **Все команды выполнять не в корне проекта, а с папки './wp-content/themes/project-name/markup-template'**
* **Если у вас MacOS при установке модулей проекта ("npm install"), достаточно зайти под учеткой админа и не нужно писать sudo иначе будет ошибка**
* **Найден критичный баг (ReferenceError: primordials is not defined) при котором на версии node.js >= 12 версии, не работает gulp версии 3.9.1 и ниже, так что для сохранении работоспособности старых версий шаблона, желательно пока не обновлять node.js
ps. Найден и протестирован легкий способ работы с проектами с gulp версии 3.9.1 и ниже - <https://timonweb.com/posts/how-to-fix-referenceerror-primordials-is-not-defined-error/> - так что можно обновлять версию node.js до версии >= 12
---

## Перед началом пользования шаблона:
* Для работы шаблона используется node.js, если не установлен на компьютере node.js, то для начала работы нужно все подготовить и установить (на сайте <https://nodejs.org> скачиваем и устанавливаем подходящую для вашей конфигурации ПК версию node.js - рекомендуется установка минимум 11 и лучше выше)
* Обратите внимание, что при установке Node.js необходимо отметить галочками установку npm и добавление программы в Path
* Необходимо установить gulp и gulp-cli глобально (откройте командную строку в любой папке и введите команду: `npm install gulp -g` и далее `npm install gulp-cli -g`)
* Для пользователей Mac и Linux, возможно, придется выполнять команды с правами суперпользователя, sudo: `sudo npm install --unsafe-perm --global gulp` - https://github.com/nodejs/node-gyp/issues/454 and reboot (**important**)
* Установка модулей для Gulp в шаблон (открываем терминал в папке проекта "wp-content/themes/project-name/markup-template" и вводим команду `npm install`)

### Начало работы с шаблоном:
- клонировать пустой репозиторий нового проекта
- копировать в него файлы шаблона
- зайти и переименовать папку названия темы https://take.ms/e2ale в название проекта (это можно увидеть в названии репозитория и совпадает с названием основной папки https://take.ms/RPyM6 https://take.ms/GYyMQ) в итоге должно быть по типу такого https://take.ms/lYCtA
- если у вас не wp проект, а просто html - заходите в папку с названием темы и удаляете все папки и файлы кроме папки "markup-template" https://take.ms/3oVIG
- далее как обычно заходим в папку ./wp-content/themes/Test-Project-WP-HTML/markup-template и устанавливаем npm пакеты "npm install"
- все можете работать


### Работа с шаблоном - команды для сборки (вводить в терминале в папке проекта "wp-content/themes/project-name/markup-template"):

- **`gulp`** (или команда **`npm start`**) - dev версия сборки проекта - без чистки папок проекта, без оптимизации картинок, с выводом sourcemaps для стилей и js, вывод дополнительных файлов для помощи в разработке папки dev, нет переноса специфичных файлов любого формата php, json и тд, из папки other --- (команду рекомендовано для постоянной разработки)

- **`gulp dev`** (или команда **`npm run dev`**)  - dev версия сборки проекта - чистка папки проекта (удаление всех файлов), без оптимизации картинок, с выводом sourcemaps для стилей и js, вывод дополнительных файлов для помощи в разработке папки dev, перенос специфичных файлов любого формата php, json и тд, из папки other --- (команду рекомендовано запускать для чистки проекта от старых,ненужных файлов , либо при при необходимости  перенести специфичные файлы любого формата php, json и тд, из папки other)

- **`gulp dist`** (или команда **`npm run dist`**) - production версия сборки проекта - чистка папки проекта, оптимизации картинок (оптимизируются только картинки которые не выводятся в папку "content-images"), файлы без sourcemaps, удаление файлов для упрощения разработки папки dev, перенос специфичных файлов любого формата php, json и тд, из папки other --- (команду рекомендовано запускать перед релизом, при передаче на тестирование, перед push в svn Mercurial)

- **`gulp dev-easy`** - запуск проекта (watcher и webserver) без чистки папки ".wp-content/themes/project-name/markup-template/build", без предварительной сборки html, css, js, img, font, other. (Запуск очень быстрый, но надо быть уверенным что с прошлого раза небыло никаких изменений, так как изменения применяться только при правки этих соответвующих файлов.)

- **`gulp dist-easy`** - запуск проекта (watcher и webserver) без чистки папки "./markup" и без сборки img (Запуск очень быстрый, но надо быть уверенным что с прошлого раза небыло никаких изменений, так как изменения применяться только при правки этих соответвующих файлов.)

- **`gulp dist-fast`** - происходит просто сборка проекта, без запуска watcher и webserver (как было при grunt dist)

- **`gulp dist-compile`** - папка не удаляется, watcher не запускается, сервер не запускается, картинки не переносятся (остаются какие и были), а вот стили, js перезаписываются - полезно когда фиксы по стилям делаешь
___

#### Про папки в проекте

```
./markup-template/	# рабочие (исходные) файлы front-end разработчика
	| - build/	# папка в которую компилируется проект при команде `gulp` или `gulp dev`
	| - fonts/	# *.ttf, *.woff, *.woff2, *.eot ... (шрифты проекта и иконочный шрифт Fontello или любой другой)
	| - gulp-task/	# папка с gulp тасками проекта и конфигурациями (пути проекта и подключение тасков в цикле)
	| - img/	# *.svg, *.png, *.jpg ... (статические изображения, иконки)
	| - js/	# *.js, ( ! js файлы проекта)
	| - other/	# для специфичных файлов любого формата php json и тд
	| - scss/	# *.css, *.scss, *.sass, (файлы стилей css либо препроцессора scss)
	| - template/	# *.html, (html модули для подключения в html страницах по типу header, footer и тд)
	| - 01-home.html	# страница проекта
	| - dev_wp-test-page.html	# страница wp-test-page проекта
```

```
//можете встретить дополнительные файлы и папки
	| .editorconfig		# Универсальные настройки редактора
	| .hgignore 		# список игнорирования файлов и папок для svn Mercurial
	| package-lock.json	# список зависимостей нужных для разработки
	| package.json		# список зависимостей нужных для разработки
	| gulpfile.js		# настройки для сборщика gulp (grunt ... )
	| README.md			# описание шаблона (в некоторых папках просто подсказки)
	| todo.txt			# to-do проекта
	| markup			# папка для prod версии проекта
	| content-images			# папка картинок для контентной части (переносятся все картинки чье название начинающиеся с "wp" например "wp1.png")
```

___

#### Про возможности и в целом как работать с проектом

- основная папка для разработки это папке в корне проекта "./wp-content/themes/project-name/markup-template"

- в папку `./wp-content/themes/project-name/markup-template/build` компилируется dev (отличия от production версии описаны выше) версия сборки проекта (команды `gulp` или `gulp dev`)

- в папку  `/wp-content/themes/project-name/markup/`  компилируется production версия сборки проекта (команда `gulp dist`)

- при подключении файлов (img, css, js) в html - подключать файлы нужно как при обычной структуре (без учета папки "assets" и "content-images")  то есть например `<img src="img/img1.jpg">` `<div style="background-image: url("img/img1.jpg");></div>` `<link media="all" rel="stylesheet" href="css/style.css">` `<script src="js/jquery.main.js"></script>` (при сборке адреса автоматически преобразуются в правильные) ps.вариант написания атрибутов предусмотрен как с одинарными кавычками ' так и с двойными ", но никак не без кавычек, так что учтите этот момент при возникновении багов с подключением файлов

- в файле .hgignore можно настроить список игнорирования файлов и папок для svn Mercurial (что б не забивать репозиторий мусором)

- сборка настроенна таким образом что переносит все файлы с разрешением .html с корня папки "./markup-template/", но не во вложенных папках. Например файл "./markup-template/home.html" перенесет в проект, а "./markup-template/folder/home.html" уже нет

- все шрифты проекта (в том числе и иконочные шрифты - можно даже с исходниками json, переносятся только файлы шрифтов) хранить в папке "./markup-template/fonts"

- все картинки проекта складывать в папку "./wp-content/themes/project-name/markup-template/img"

- картинкам, для контентной части страницы, для wp, необходимо давать название начинающиеся с "wp" - например "wp1.jpg". Чтобы в итоге они переносились в отдельную папку "content-images" в корне проекта (подключать ее в html как и любую другую картинку `<img src="img/wp1.jpg">` при компиляции пути поменяются сами)

- все js файлы проекта складывать в папку "./markup-template/js", логика переноса такая же как у html. "./markup-template/js/jquery.main.js" - переноситься, а "./markup-template/js/folder/jquery.main.js" уже нет

- все файлы стилей проекта складывать в папку "./markup-template/scss", логика переноса такая же как у html. "./markup-template/scss/style.scss" - переноситься, а "./markup-template/js/folder/style.scss" уже нет

- в проекте есть возможность подключения отдельных js скриптов и html файлов (разбитие проекта на модули). Подключения происходит через конструкцию `//= folder-name/file-name.js` Это не обязательное условие, можете работать с js и html как и раньше в одном общем файле, просто имейте ввиду есть такая возможность (в шаблоне привел пример работы)

- в проекте есть возможность создавать и подключать свои плагины для облегчения разработки (они будут присутствовать только в dev версии проекта команда "gulp" и "gulp dev" и будут вырезаться в production версии проекта команда "gulp dist"), такие как показ контрольных точек, быстрая навигация по проекту и все что еще создадим, пишите у кого какие идеи что можно добавить.

- слежение за файлами (обновление сервера при изменении файла) настроенна на существующую структуру папок и создание новых возможно лишь в существующих корневых папках, для шрифтов "./markup-template/fonts", для картинок "./markup-template/img", для js "./markup-template/js", для стилей "./markup-template/scss", для html "./markup-template/template"

- плагин gulp riger не умеет работать рекурсивно — если попробуете подключить файл, в котором уже есть подключение другого файла, вывалится ошибка и надо иметь это ввиду
___

#### Известные на данный момент баги и их обходы (если не нашли вашей проблемы посмотрите еще тут - <https://reliablepsd.teamwork.com/#/tasks/14277435>):
- при любой gulp команде "gulp" | "gulp dev" | "gulp dist" возникает ошибка "-Local gulp not found in D:\work-project\template" (решение 1 - проверьте установили ли вы все плагины - есть ли у вас папка node_module в папке проекта "./wp-content/themes/project-name/markup-template", если нет то установите, команда `npm install` | решение 2 - проверьте в той ли папке вы запускаете команды - должна быть не корневая папка проекта, а папка "./wp-content/themes/project-name/markup-template")
- при команде "gulp dist" или "gulp dev" временами выбивает ошибка "Error: EPERM: operation not permitted" (решение: запустить команду еще раз) ps.причина найдена, баг из за файлов README.md в папках в корне проекте assets и content-images, в стабильной версии эти файлы убраны и бага не возникает, в этой версии оставил как подсказку для общего ознакомления.
- ошибка плагина "gulp-rigger" "TypeError: First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object." (при подключении файлов через плагин "gulp-rigger" через конструкцию "//= folder-name/file-name.html" вы где то допустили ошибку при написания пути к файлу, внимательно проверьте свои последнии подключения). Либо как вариант при выравнивание кода через  плагин для текстового редактора (в моем случае HTML/CSS/JS Prettify)  неправильно выравнивает и смешивает конструкции для вызова, проверьте чтобы подключения файлов было с новой строки
- иногда при работе с картинками (обрезка, уменьшения, увеличения размера) выбивает шаблон (решение - просто перезапустите gulp)
-  если возникают какие либо проблемы связанные с версией node.js (такое может возникнут при работе со старыми проектами), чем пытаться править все возникающие ошибки советую просто переключиться (понизить) версию node.js (делается через утилиту nvm - более подробно смотри - [https://ua-blog.com/%D1%82%D1%83%D1%82%D0%BE%D1%80%D0%B8%D0%B0%D0%BB-%D0%BF%D0%BE-node-version-manager-nvm/ ](https://))

___

### Итого главное:
- все команды выполнять не в корне проекта, а с папки './wp-content/themes/project-name/markup-template'
- для постоянной разработки (в dev режиме) рекомендовано использовать команду **`gulp`** (или команда **`npm start`**)
- для компиляции проекта для дальнейшего тестирования, использовать команду **`gulp dist`**  (или команда **`npm run dist`**)
